# テスト駆動開発「ABC PAY のチャージ」

## 概要

テスト駆動開発の学習用です。TypeScript と Jest を使用しています。

**課題内容**

ABC PAY でお金をチャージする画面を作成中です。
**ABC PAY でお金をチャージする際の付与ポイントのデシジョンテーブルを作成してください。**
そのデシジョンテーブルのテストケースをテストしてください。
テストを通過した上で ABC PAY のお金をチャージする画面を実装してください。

**要件**

- ABC PAY のポイントは、お金をチャージする際やお買い物をしたい際に貯まります。
- ABC PAY のポイントは、お買い物をする際に支払いの一部として使用することができます。
- ABC PAY では、当月の支払額が 10 万円を超えた場合は、翌月のポイントに 1.0%が付与されます。
- 支払いが ABC PAY の場合は、支払金額に 0.5%のポイントが付きます。
- 支払いが ABC PAY のクレジットカードの場合は、支払金額に 1.0%のポイントが付きます。
- クレジットカードがゴールド以上であれば支払金額に 0.5%のポイントが付与されます。
- 銀行からチャージする場合のポイントは以下の通りです。
  - 3 万円以下 : 0.1%
  - 5 万円以下 : 0.2%
  - 10 万円以上 : 0.5%
- クレジットカードからチャージする場合のポイントは以下の通りです。
  - 5 万円以下 : 0.2%
  - 10 万円以下 : 0.5%
  - 20 万円以上 : 1.0%
- ABC PAY の利用者は、既に銀行とクレジットカードをアプリに登録している前提で進めてください。

**仕様**

- 支払方法
  - ABC PAY
  - ABC PAY（クレジットカード）
- チャージ方法
  - 銀行
  - クレジットカード
- チャージ金額は 1000 円単位です
- チャージ金額の最大値は 30 万円です。

## テスト駆動開発の手順

**1. テストケースを作成する**

システムの要件と仕様を確認し、デシジョンテーブルのテストケースを作成してください。

**2. ソースファイル(src/pay.ts)に空の関数を作成する**

src/pay.ts に空の関数を作成してください。
テスト対象の関数は１つです。
必要に応じてデータ型を作成してください。

**3. テストファイル(src/pay.test.ts)にテストを実装する**

src/pay.test.ts にテストケースとテストを実装してください。
必要に応じてテストデータ用のデータ型を作成してください。

**4. テストを実施する**

```bash
npm run test
```

**5. ソースファイル(src/pay.ts)の関数を実装する**

すべてのテストケースが通るように、src/pay.ts の関数を実装してください。
テスト対象の関数は１つです。その関数の中でロジックを関数化したい場合は関数化しても大丈夫です。ただしテスト対象は一番外側の関数１つのみです。
必要に応じてデータ型を作成してください。

**6. テストを実装する**

**7. すべてのテスト対象が通るまで 2~6 を繰り返す**

## ウェブサイトの作成手順

**1. ターミナルで開発用サーバを起動する**

```bash
npm run start
```

**2. ターミナルで TypeScript のファイルの変更を監視する**

```bash
npm run watch
```

**3. アプリの仕様を満たすように処理を実装する**

index.html、css/style.css、src/main.ts、src/pay.ts を修正してください。

**4. 公開用にビルドする**

```bash
npm run build
```

**5. ウェブサーバで公開する**

ウェブサーバにアップロードするファイルは、index.html、css ディレクトリ、dist ディレクトリなどです。

## 環境構築の手順

**1. リポジトリをクローンする**

```bash
git clone https://github.com/jp-ymatsumoto/tdd-pay-charge-by-ts.git
```

**2. Visual Studio Code で開く**

```bash
code tdd-pay-charge-by-ts
```

**3. パッケージをインストールする**

```bash
npm i
```
